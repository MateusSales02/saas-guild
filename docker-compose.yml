version: "3.8"

services:
  web:
    image: node:20-alpine
    working_dir: /app
    environment:
      CHOKIDAR_USEPOLLING: "true"   # melhora hot reload no Windows
    volumes:
      - ./apps/web:/app
      - pnpm-store:/root/.local/share/pnpm/store
    ports:
      - "5173:5173"
    command: >
      sh -c "
        corepack enable &&
        corepack prepare pnpm@latest --activate &&
        pnpm install &&
        pnpm dev --host 0.0.0.0
      "
    tty: true

volumes:
  pnpm-store:
